<!DOCTYPE html>
<html>
<head>
	<title>X, A, or B?</title>
	<meta name="author" content="fowwo">
	<meta charset="UTF-8">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Merienda&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="Style/style.css">
	<link rel="stylesheet" type="text/css" href="Style/background.css">
	<link rel="stylesheet" type="text/css" href="Style/panel.css">
	<link rel="stylesheet" type="text/css" href="Style/data.css">
	<link rel="stylesheet" type="text/css" href="Style/leaderboard.css">
	<link rel="stylesheet" type="text/css" href="Style/user.css">
	<link rel="stylesheet" type="text/css" href="Style/statistics.css">
</head>
<body>
	<script src="Model/User.js"></script>
	<nav>
		<div class="nav-group">
			<div id="nav-leaderboard" onclick="switchTab(event)">leaderboard</div>
			<div id="nav-user" onclick="switchTab(event)">user</div>
		</div>
		<div id="xab"><span style="color:var(--blue)">X</span>, <span style="color:var(--green)">A</span>, or <span style="color:var(--red)">B</span>?</div>
		<div class="nav-group">
			<div id="nav-statistics" onclick="switchTab(event)">statistics</div>
			<div id="nav-info" onclick="switchTab(event)">info</div>
		</div>
	</nav>
	<div id="leaderboard-container" class="container active">
		<table id="leaderboard">
			<thead>
				<tr>
					<th>#</th>
					<th>Name</th>
					<th id="th-score" class="clickable" onclick="viewLeaderboard(event)">Score</th>
					<th id="th-wins" class="clickable" onclick="viewLeaderboard(event)">Wins</th>
					<th id="th-total" class="clickable" onclick="viewLeaderboard(event)">Total</th>
					<th id="th-accuracy" class="clickable" onclick="viewLeaderboard(event)">Accuracy</th>
					<th id="th-x" class="clickable" onclick="viewLeaderboard(event)">X</th>
					<th id="th-a" class="clickable" onclick="viewLeaderboard(event)">A</th>
					<th id="th-b" class="clickable" onclick="viewLeaderboard(event)">B</th>
				</tr>
			</thead>
			<tbody id="leaderboard-placeholder" class="active">
				<tr>
					<td></td>
					<td></td>
					<td>^</td>
					<td>^</td>
					<td>^</td>
					<td>^</td>
					<td>^</td>
					<td>^</td>
					<td>^</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div id="user-container" class="container" style="display: none; opacity: 0;">
		<div class="panel scrollable" style="height: 100%">
			<div></div>
			<div>
				<form id="search-form" autocomplete="off" spellcheck="false">
					<input type="text" id="search" style="width: 100%; margin-bottom: 10px;" placeholder="Username">
				</form>
				<div id="search-results" style="display: none">
					<div>
						<div style="display: flex; margin-bottom: 10px;">
							<div id="search-name"></div>
							<div id="search-badges"></div>
							<div id="search-team"></div>
						</div>
						<table id="user-stats">
							<tbody>
								<tr>
									<th>Score</th>
									<th>Wins</th>
									<th>Total</th>
									<th>Accuracy</th>
									<th style="color: var(--blue)">X</th>
									<th style="color: var(--green)">A</th>
									<th style="color: var(--red)">B</th>
								</tr>
								<tr>
									<td id="user-score" style="color: #fff"></td>
									<td id="user-wins"></td>
									<td id="user-guesses"></td>
									<td id="user-accuracy"></td>
									<td id="user-x" style="color: var(--blue)"></td>
									<td id="user-a" style="color: var(--green)"></td>
									<td id="user-b" style="color: var(--red)"></td>
								</tr>
								<tr>
									<td id="user-score-rank"></td>
									<td id="user-wins-rank"></td>
									<td id="user-guesses-rank"></td>
									<td id="user-accuracy-rank"></td>
									<td id="user-x-rank"></td>
									<td id="user-a-rank"></td>
									<td id="user-b-rank"></td>
								</tr>
							</tbody>
						</table>
						<div class="data-container">
							<div class="pie-container">
								<div class="pie" id="pie-user-wins"></div>
							</div>
							<div class="bar-container">
								<h3>Wins</h3>
								<ul id="bar-user-wins"></ul>
							</div>
						</div>
						<div class="data-container">
							<div class="pie-container">
								<div class="pie" id="pie-user-guesses"></div>
							</div>
							<div class="bar-container">
								<h3>Guesses</h3>
								<ul id="bar-user-guesses"></ul>
							</div>
						</div>
					</div>
				</div>		
				<div id="search-tip">
					Enter a username in the search box above to view the stats for that user.
					For users who have changed their username, use the most recent username for which they have made at least one guess.
					(Usernames are only updated once a new guess is made.)
				</div>
			</div>
		</div>
	</div>
	<div id="statistics-container" class="container" style="display: none; opacity: 0;">
		<div class="panel scrollable" style="height: 100%">
			<div></div>
			<div style="display: flex; flex-wrap: wrap; flex-direction: row-reverse;">
				<div style="min-width: 300px; flex-grow: 3;">
					<div class="panel" style="margin-bottom: 10px">
						<div></div>
						<div>
							<b>Last Updated:</b> <span style="color: #fff">May 7th, 2022</span>
							<hr>
							<ul>
								<li><b>Number of Rounds Played:</b>
									<span id="stat-rounds-played-total" style="color: #fff">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-rounds-played-x" style="color: var(--blue)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-rounds-played-a" style="color: var(--green)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-rounds-played-b" style="color: var(--red)">...</span>
								</li>
								<li><b>Number of Guesses:</b>
									<span id="stat-guesses-total" style="color: #fff">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-guesses-x" style="color: var(--blue)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-guesses-a" style="color: var(--green)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-guesses-b" style="color: var(--red)">...</span>
								</li>
								<li><b>Number of Wins:</b>
									<span id="stat-wins-total" style="color: #fff">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-wins-x" style="color: var(--blue)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-wins-a" style="color: var(--green)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-wins-b" style="color: var(--red)">...</span>
								</li>
							</ul>
							<hr>
							<ul>
								<li><b>Number of Unique Players:</b>
									<span id="stat-unique-players" style="color: #fff">...</span>
								</li>
								<li><b>Number of Team Members:</b>
									<span id="stat-members-x" style="color: var(--blue)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-members-a" style="color: var(--green)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-members-b" style="color: var(--red)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-members-none" style="color: #fff8">...</span>
								</li>
								<li><b>Average Accuracy:</b>
									<span id="stat-average-accuracy">...</span>
								</li>
								<li><b>Cumulative Accuracy:</b>
									<span id="stat-cumulative-accuracy">...</span>
								</li>
							</ul>
							<hr>
							<ul>
								<li><b>Last 50 Occurrences:</b>
									<div id="stat-last-occurrences"></div>
								</li>
								<li><b>Longest Streak:</b>
									<span id="stat-streak-x" style="color: var(--blue)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-streak-a" style="color: var(--green)">...</span>
									<span style="color: #fff">/</span>
									<span id="stat-streak-b" style="color: var(--red)">...</span>
								</li>
								<li><b>Most Guesses in a Single Round:</b>
									<span id="stat-most-guesses" style="color: #fff">...</span>
									<span id="stat-most-guesses-date" style="color: #fff8">(...)</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div style="flex-grow: 1">
					<div class="data-container">
						<div class="pie-container">
							<div class="pie" id="pie-total-occurrences"></div>
						</div>
						<div class="bar-container">
							<h3>Number of Occurrences</h3>
							<ul id="bar-total-occurrences"></ul>
						</div>
					</div>
					<div class="data-container">
						<div class="pie-container">
							<div class="pie" id="pie-total-guesses"></div>
						</div>
						<div class="bar-container">
							<h3>Number of Guesses</h3>
							<ul id="bar-total-guesses"></ul>
						</div>
					</div>
					<div class="data-container">
						<div class="pie-container">
							<div class="pie" id="pie-total-wins"></div>
						</div>
						<div class="bar-container">
							<h3>Number of Wins</h3>
							<ul id="bar-total-wins"></ul>
						</div>
					</div>
					<div class="data-container">
						<div class="pie-container">
							<div class="pie" id="pie-total-members"></div>
						</div>
						<div class="bar-container">
							<h3>Number of Team Members</h3>
							<ul id="bar-total-members"></ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="info-container" class="container" style="display: none; opacity: 0;">
		<div class="panel scrollable" style="height: 100%">
			<div></div>
			<div>
				<h3>What is this?</h3>
				<p>
					This is a leaderboard for AnEternalEnigma's
					<b style="color: #fff"><span style="color: var(--blue)">X</span>, <span style="color: var(--green)">A</span>, or <span style="color: var(--red)">B</span></b>
					game.
					In Silent Hill: Homecoming, there is a point where the player must mash either
					<span style="color: var(--blue)">X</span>, <span style="color: var(--green)">A</span>, or <span style="color: var(--red)">B</span>,
					and this button is randomly selected each time.
					When Enigma speedruns the game, he asks his audience what they think the button will be.
					This page is a way to view those predictions and results.
				</p><p>
					Since the button is random each time (with each option having an equal chance to be selected), the results are entirely based on luck.
					This "leaderboard" is more like a sorted table.
					However, users are still sorted and "ranked" in each column, with the top few users being awarded stars.
				</p>
				<hr>
				<h3>Does this show every single round?</h3>
				<p>
					Unfortunately, it does not.
					I created this project on a whim about five months after Enigma submitted his first run.
					Since Twitch only saves VODs for two months, the first two or three months of data are missing.
				</p><p>
					Thankfully, hundreds of rounds have been played since, so the missing data is somewhat negligible.
					Some old highlights were saved that I could grab data from, but it is not much in comparison to how many runs are missing.
					It's also possible that
					<b style="color: #fff"><span style="color: var(--blue)">X</span>, <span style="color: var(--green)">A</span>, or <span style="color: var(--red)">B</span></b>
					wasn't a recurring game until later into the missing months, so there might be less missing data than I initially thought.
				</p><p>
					The collected data consists of every run since <b>April 19th, 2020</b>.
				</p>
				<hr>
				<h3>How did you get this data?</h3>
				<p>
					I manually copied every guess from chat and put them in a text file.
				</p><p>
					Initially, I wrote a script to collect guesses from chat messages, but it was hard to collect data accurately due to the different ways people like to format their predictions.
					The script also required that I was always watching the stream to mark the winning option, but this is not feasible nor reliable.
				</p><p>
					I am currently able to download chat logs from VODs and collect predictions from them, which should allow me to update the data quicker and easier.
					I still have to filter out chat messages manually, however.
				</p>
				<hr>
				<h3>How long did this take to make?</h3>
				<p>
					This project started out on June 1st, 2020 as a Twitch bot that collected guesses.
					Initially, it was a console app, but I wanted to visualize the data, so I threw it onto a webpage.
					Due to the difficulties of automatically and accurately collecting guesses, I scrapped the Twitch bot and began copying guesses manually.
				</p><p>
					For the most part, the project is done; all that is left is to update the data whenever Enigma does more runs.
					However, I will make some changes every now and then.
					For example, I <a href="/old">redesigned the webpage</a> after having a bit more experience with web design.
				</p>
				<hr>
				<h3>Can you show other kinds of stats?</h3>
				<p>
					I've saved the guesses and outcomes for each round, so I can always go back and add new ways of showing stats.
					However, I've only saved guesses that were
					<span style="color: var(--blue)">X</span>, <span style="color: var(--green)">A</span>, or <span style="color: var(--red)">B</span>,
					so I can't show any stats regarding guesses like <span class="sneaky" title="Sorry, tinabeau.">Q, C, or Y</span>, for example.
				</p>
			</div>
		</div>
	</div>
	<div id="background-container">
		<svg id="background1" viewBox="0 0 1 1"></svg>
		<svg id="background2" viewBox="0 0 1 1"></svg>
		<svg id="background3" viewBox="0 0 1 1"></svg>
		<svg id="background4" viewBox="0 0 1 1"></svg>
		<svg id="background5" viewBox="0 0 1 1"></svg>
	</div>
	<script src="index.js"></script>
</body>
</html>
